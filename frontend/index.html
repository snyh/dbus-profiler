<!doctype html>
<html ng-app="dbus-profiler">
  <head>
    <script src = "./js/lib/angular.js"> </script>
    <script src = "./js/lib/angular-smart-table.js"></script>
    
    <script src = "./js/lib/d3.min.js"></script>
    <script src = "./js/lib/d3-shape.min.js"></script>
    <script src = "./js/lib/string-format.js"></script>

    <link rel="stylesheet" href="./css/lib/bootstrap.min.css">
    <link rel="stylesheet" href="./css/header.css">
    <title>dbus-profiler</title>
  </head>
  
  <body>

    <div id="container" class="container">
      <div id="header" ng-controller="HeaderCtrl"  class="alert alert-info">
        Bus Address:<span>  {{info.BusAddr}} </span>
        We have already record <span>{{info.Duration / 1000 / 1000 / 1000 | number:0 }}s</span> from LaunchTime: <time> {{info.LaunchTimestamp | date: 'medium'}} </time>
        There have <span>{{info.N}}</span> calls, and they total cost: <span> {{info.Cost/1000/1000.0 | number:3 }}ms </span> </br>
      </div>

      <div id="content">
        
        <div id="chart" ng-controller="SummaryCtrl">
          <svg width="100%" height="100%"></svg>
        </div>

        <div id="detail" ng-controller="DetailCtrl" ng-show="IfcName != ''">
          <div id="ifc_detail">
            <p>Name: {{info.Ifc}} </p>
            <p>TotalCall: {{info.TotalCall}} </p>
            <p>TotalCost: {{info.TotalCost/100/1000 | number:3}}ms </p>
          </div>

          <div id="method_detail">
            <table st-table="data" class="table table-striped" st-safe-src="rows">
              <thead>
              <tr>
                <th st-sort="name">Name</th>
                <th st-sort="type">Type</th>
                <th st-sort="call">Call</th>
                <th st-sort="cost">Cost</th>
              </thead>

              <tbody>
              <tr ng-repeat="row in data" ng-click="switchMethod(row.name)">
                <td>{{row.name}}</td>
                <td>{{row.type}}</td>
                <td>{{row.call | percentage: info.TotalCall:2}}</td>
                <td>{{row.cost | percentage: info.TotalCost:2}}</td>
              </tr>
              </tbody>
            </table>

            <div id="method_detail_chart">
              {{detailName}}
              <svg>
              </svg>
            </div>
          </div>
        </div>
      </div>
      
    </div>
    
    <!--build:js js/main.min.js -->
    <script src = "./js/draw_detail.js"></script>
    <script src = "./js/controller.js"></script>
    <script src = "./js/main.js"></script>
    <!-- endbuild -->
  </body>
</html>
